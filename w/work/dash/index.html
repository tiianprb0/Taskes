<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Creative Team Task Tracker</title>
    <!-- Memuat font Playfair Display dan Plus Jakarta Sans dari Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Plus+Jakarta+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Memuat Font Awesome untuk ikon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Memuat jsPDF untuk fungsionalitas PDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- Memuat file CSS utama untuk variabel global dan styling lain -->
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <!-- Overlay untuk loading -->
    <div id="loadingOverlay" class="loading-overlay">
        <i class="fas fa-spinner fa-spin fa-3x"></i>
    </div>

    <!-- Konten utama dashboard -->
    <div class="container">
        <!-- Header Dashboard -->
        <header class="header">
            <div class="user-info">
                <div class="user-avatar" id="user-avatar">T</div>
                <span id="username-display">Tian</span>
            </div>
            <div class="header-controls">
                <button id="search-btn" class="search-btn"><i class="fas fa-search"></i></button>
                <button id="hamburger-menu" class="hamburger-menu"><i class="fas fa-bars"></i></button>
            </div>
        </header>

        <!-- Search Bar yang disembunyikan -->
        <div id="search-bar" class="search-bar">
            <input type="text" id="search-input" class="search-input" placeholder="Search tasks...">
        </div>

        <div id="dashboard-main-content">
            <!-- Title Bar dan Sorting -->
            <div class="title-bar">
                <h1>Task List</h1>
                <select id="sort-select" class="sort-select">
                    <option value="default">Urutan Default</option>
                    <option value="deadline">Urutkan Deadline</option>
                    <option value="priority">Urutkan Prioritas</option>
                </select>
            </div>

            <!-- Filter Controls -->
            <div class="filter-controls">
                <button id="filter-all" class="button filter-btn active">Semua</button>
                <button id="filter-my" class="button filter-btn">Tugas Saya</button>
                <button id="addTaskButton" class="button add-task-btn"><i class="fas fa-plus"></i> Tambah Tugas</button>
            </div>

            <!-- Task List -->
            <ul id="task-list" class="task-list">
                <!-- Task items akan dimasukkan di sini oleh JavaScript -->
            </ul>

            <!-- Empty State -->
            <div id="empty-state" class="empty-state" style="display: none;">
                <p>Tidak ada tugas untuk ditampilkan.</p>
                <small>Tambahkan tugas baru untuk memulai.</small>
            </div>
        </div>

        <!-- Formulir Tambah/Edit Tugas (Modal) -->
        <div id="taskFormSection" class="task-form-section" style="display: none;">
            <h3 class="form-section-title" id="modalTitle">Add New Task</h3>
            <form id="taskForm">
                <input type="hidden" id="taskId">
                <div class="form-group">
                    <label for="projectName">Project Name:</label>
                    <input type="text" id="projectName" class="input-field" placeholder="e.g. Project Promo Akhir Tahun">
                </div>
                <div class="form-group">
                    <label for="activity">Activity / Task:</label>
                    <input type="text" id="activity" class="input-field" placeholder="e.g. Design Feed Instagram" required>
                </div>
                <div class="form-group">
                    <label for="propertySelect">Property:</label>
                    <select id="propertySelect" class="select-field">
                        <option value="">Pilih Property</option>
                        <option value="EWB">EWB</option>
                        <option value="GEHS">GEHS</option>
                        <option value="EGAC">EGAC</option>
                        <option value="EH">EH</option>
                        <option value="SKAE">SKAE</option>
                        <option value="ESKAfe">ESKAfe</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="platform">Platform:</label>
                    <select id="platform" class="select-field" multiple>
                        <option value="Semua Social Media">Semua Social Media</option>
                        <option value="Instagram Feed">Instagram Feed</option>
                        <option value="Story Instagram">Story Instagram</option>
                        <option value="TikTok">TikTok</option>
                        <option value="TV Display">TV Display</option>
                        <option value="Media Cetak">Media Cetak</option>
                        <option value="Website">Website</option>
                        <option value="Lainnya">Lainnya</option>
                    </select>
                </div>
                <div class="form-group" id="otherPlatformGroup">
                    <label for="otherPlatformInput">Lainnya:</label>
                    <input type="text" id="otherPlatformInput" class="input-field" placeholder="Pisahkan dengan koma">
                </div>
                <div class="form-group">
                    <label for="workStatus">Work Status:</label>
                    <select id="workStatus" class="select-field">
                        <option value="Editing">Editing</option>
                        <option value="Take Konten">Take Konten</option>
                        <option value="Final Touch">Final Touch</option>
                        <option value="Done">Done</option>
                        <option value="On Hold">On Hold</option>
                    </select>
                </div>
                <div class="form-group" id="finalTouchProgressGroup" style="display:none;">
                    <label for="finalTouchProgress">Progress: <span id="finalTouchProgressValue">0</span>%</label>
                    <input type="range" id="finalTouchProgress" class="slider-field" min="0" max="100" value="0">
                </div>
                <div class="form-group">
                    <label for="approvalStatus">Approval Status:</label>
                    <select id="approvalStatus" class="select-field">
                        <option value="To Be Announced (TBA)">To Be Announced (TBA)</option>
                        <option value="Approved">Approved</option>
                        <option value="Revised">Revised</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="notes">Notes:</label>
                    <textarea id="notes" class="textarea-field" placeholder="e.g. File mentah dapat diakses di folder Google Drive"></textarea>
                </div>
                <div class="form-group">
                    <label for="picTeam">PIC / Team:</label>
                    <select id="picTeam" class="select-field" multiple required>
                        <option value="Antony">Antony</option>
                        <option value="Tian">Tian</option>
                        <option value="Steven">Steven</option>
                        <option value="Mutia">Mutia</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="deadline">Deadline:</label>
                    <input type="date" id="deadline" class="input-field">
                </div>
                <div class="form-group">
                    <label for="priority">Priority:</label>
                    <select id="priority" class="select-field">
                        <option value="Low">Low</option>
                        <option value="Medium">Medium</option>
                        <option value="High">High</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Attachment:</label>
                    <div class="attachment-options">
                        <label class="radio-label">
                            <input type="radio" name="attachment-type" value="upload" checked>
                            Unggah File
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="attachment-type" value="url">
                            Link URL
                        </label>
                    </div>
                </div>
                <div class="form-group" id="attachment-upload-group">
                    <input type="file" id="attachmentFile" class="input-field" accept="image/*">
                </div>
                <div class="form-group" id="attachment-url-group" style="display: none;">
                    <input type="url" id="attachmentLink" class="input-field" placeholder="Paste URL gambar di sini">
                </div>
                <div id="image-preview-container" class="image-preview-container" style="display: none;">
                    <img id="image-preview" class="image-preview" alt="Image Preview">
                    <button type="button" id="remove-image-button" class="remove-image-button"><i class="fas fa-times"></i></button>
                </div>
                <div class="modal-buttons">
                    <button type="button" id="cancelTaskButton" class="button secondary-button">Batal</button>
                    <button type="submit" class="button success-button">Simpan Tugas</button>
                </div>
            </form>
        </div>

        <!-- Settings Panel -->
        <div id="settings-panel" class="settings-panel">
            <div class="settings-header">
                <h3 class="settings-title">Pengaturan</h3>
                <button id="close-settings" class="close-button"><i class="fas fa-times"></i></button>
            </div>
            <div class="settings-group">
                <span class="settings-label">Akun</span>
                <a href="#" id="logoutButton" class="settings-btn"><i class="fas fa-sign-out-alt"></i> Logout</a>
                <a href="#" id="setPinDashboardText" class="settings-btn"><i class="fas fa-lock"></i> Set / Ganti PIN</a>
            </div>
            <div class="settings-group">
                <span class="settings-label">Tugas</span>
                <a href="#" id="archiveTasksText" class="settings-btn"><i class="fas fa-box-archive"></i> Lihat Tugas Diarsipkan</a>
                <a href="#" id="generateReportButton" class="settings-btn"><i class="fas fa-file-pdf"></i> Buat Laporan Harian (PDF)</a>
            </div>
            <div class="settings-group">
                <span class="settings-label">Tema</span>
                <div class="theme-options">
                    <button class="theme-option theme-light active" data-theme="light-mode"></button>
                    <button class="theme-option theme-dark" data-theme="dark-mode"></button>
                    <button class="theme-option theme-pink" data-theme="pink-mode"></button>
                    <button class="theme-option theme-blue" data-theme="blue-mode"></button>
                    <button class="theme-option theme-green" data-theme="green-mode"></button>
                </div>
            </div>
        </div>
    </div>
    <!-- Modal Set/Ganti PIN -->
    <div id="setPinDashboardModal" class="modal-overlay">
        <div class="modal-content">
            <button id="closePinDashboardModalButton" class="close-button"><i class="fas fa-times"></i></button>
            <h3 class="form-section-title">Atur/Ganti PIN</h3>
            <p>Masukkan PIN 4 digit baru, atau kosongkan untuk menghapusnya.</p>
            <div class="form-group">
                <label for="dashboardNewPin">PIN Baru (4 digit):</label>
                <input type="password" id="dashboardNewPin" class="input-field" minlength="4" maxlength="4">
            </div>
            <p id="dashboardPinErrorMessage" class="error-message"></p>
            <div class="modal-buttons">
                <button id="cancelDashboardPinButton" class="button secondary-button">Batal</button>
                <button id="saveDashboardPinButton" class="button success-button">Simpan PIN</button>
            </div>
        </div>
    </div>
    <!-- Modal Lihat Arsip Tugas -->
    <div id="archiveListModal" class="modal-overlay">
        <div class="modal-content">
            <button id="closeArchiveListModalButton" class="close-button"><i class="fas fa-times"></i></button>
            <h3 class="form-section-title">Tugas Diarsipkan</h3>
            <div id="archivedProjectsList">
                <!-- Daftar tugas yang diarsipkan akan dimuat di sini -->
            </div>
        </div>
    </div>
    <!-- Modal Notifikasi Kustom -->
    <div id="customAlertModal" class="modal-overlay">
        <div class="modal-content">
            <button id="customAlertOkButton" class="button primary-button">OK</button>
        </div>
    </div>
    <!-- Modal Konfirmasi Kustom -->
    <div id="customConfirmModal" class="modal-overlay">
        <div class="modal-content">
            <p id="customConfirmMessage"></p>
            <div class="modal-buttons">
                <button id="customConfirmCancelButton" class="button secondary-button">Batal</button>
                <button id="customConfirmOkButton" class="button primary-button">OK</button>
            </div>
        </div>
    </div>
    <!-- Modal Popup Gambar -->
    <div id="imagePopupModal" class="modal-overlay">
        <div class="modal-content-image">
            <button id="closeImagePopupModalButton" class="close-button"><i class="fas fa-times"></i></button>
            <img id="imagePopupImage" class="image-popup" src="" alt="Popup Image">
        </div>
    </div>

    <!-- Script Utama -->
    <script src="script.js"></script>
</body>
</html>
